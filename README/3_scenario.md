# Порядок работы программы

## Получить путь к файлу выгрузки

Составить путь к файлу из атрибутов команды 
или взять путь по умолчанию из конфигурации.

Проверить наличие файла по данному пути.

## Обнулить БД

Удалить (если были) в обратном порядке по внешним ключам:
cars,
generations, models,
остальные в любом порядке.

## Создать таблицы с нуля

Создать в порядке добавления внешних ключей:
в любом порядке таблицы вида id+name 
(colors, transmissions, body_types, engine_types, gear_types, marks),
далее 
models, generations, 
cars.

## Заполнение таблиц вида id+name

Выделить из файла выгрузки массивы уникальных имён.

Отфильтровать массивы c FILTER_SANITIZE_STRING.

Внести данные в соотв. таблицы.

Прочесть из таблиц результат 
в форме ассоциативных массивов name=>id.

## Заполнение таблицы models

Выделить из файла выгрузки 
ассоциативный массив modelName=>markName.

Отфильтровать ключи и значения c FILTER_SANITIZE_STRING.

Превратить в массив modelName=>markId,
используя массив markName=>markId из предыдущего шага.

Внести данные в таблицу models.

Прочесть из таблицы результат
в форме ассоциативного массива name=>id.

## Заполнение таблицы generations

Выделить из файла выгрузки
ассоциативный массив generationId=>[generationName, modelName].

Привести ключи к натуральным числам с помощью (int).

Отфильтровать значения c FILTER_SANITIZE_STRING.

Превратить в массив generationId=>[generationName, modelId],
используя массив modelName=>id из предыдущего шага.

Внести данные в таблицу generations.

## Заполнение таблицы cars

Пройти по выгрузке как xml-объекту.

На каждом оффере добавить данные в таблицу cars:

id, year, run - взять из выгрузки,

для набора mark, model, generation, generation_id 
взять из выгрузки generation_id,

id, year, run, generation_id
привести к натуральным числам с помощью (int),

использовать массивы name=>id пяти таблиц вида name+id
(colors, transmissions, body_types, engine_types, gear_types)
для получения соответствующих внешних ключей по данным из выгрузки
(фильтровать исходные значения c FILTER_SANITIZE_STRING).